<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Giulia & Louis - Mariage</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter&family=Lora&family=Playfair+Display&display=swap" rel="stylesheet">
</head>
<body>
<header>
        <input type="checkbox" id="menu-toggle" />
        <label for="menu-toggle" class="burger">&#9776;</label>

        <nav class="menu">
            <ul>
            <li><a href="#accueil">Accueil</a></li>
            <li><a href="#programme">Programme</a></li>
            <li><a href="#infos">Informations pratiques</a></li>
            <li><a href="#liste">Liste de mariage</a></li>
            <li><a href="#reponse" class="cta-menu">R√©pondre</a></li>
            </ul>
        </nav>
</header>


    <section id="accueil" class="section beige">
        <img src="images/Mariage net.jpg" alt="Photo panoramique de Giulia et Louis">
        <h1>Giulia et Louis se marient le 4 juillet 2026</h1>
    </section>

    <section id="programme" class="section ivoire">
        <h2>Nous avons h√¢te de vous retrouver, le programme :</h2>
        <div class="grid">
            <a href="https://maps.google.com/?q=2+Pl.+Wilson,+87400+Saint-L√©onard-de-Noblat" target="_blank" class="overlay-link">
            <div class="box fond-ceremonie">
                <div class="overlay-texte">
                    <h3>Samedi 4 juillet</h3>
                    <p>C√©r√©monie religieuse √† 15h √† la coll√©giale de Saint-L√©onard de Noblat suivi d'un verre de l'amiti√© au Bar "Les Deux Tours"</p>
                    <span class="arrow-icon">‚Üí</span>
                </div>
            </div>
            </a>

            <a href="https://www.google.com/maps?q=Ch√¢teau+de+Laplaud,+87520+Oradour-sur-Vayres" target="_blank" class="overlay-link">
            <div class="box fond-reception">
                <div class="overlay-texte">
                    <h3>Samedi 4 juillet</h3>
                    <p>Vin d'honneur et festivit√©s √† partir de 18h au Chateau de Laplaud</p>
                    <span class="arrow-icon">‚Üí</span>
                </div>
            </div>
            </a>

            <div class="box fond-brunch">
                <div class="overlay-texte">
                    <h3>Dimanche 5 juillet</h3>
                    <p>Brunch (de 11h √† 14h) et piscine au Chateau de Laplaud¬†</p>
                </div>
            </div>
          
        </div>
    </section>

    <section id="infos" class="section beige">
        <h2>Quelques infos pratiques</h2>
        <div class="grid">
            <div class="box">
                <h3>Acc√®s</h3>
                <p> <span class="highlight"> Concernant la c√©r√©monie religieuse :</span> la Coll√©giale se situe en plein c≈ìur du centre-ville. Le parking de la Place Gay Lussac est situ√© aux abords de la Coll√©giale. Toutefois celui-ci est limit√© en place¬†; il est √©galement possible de se garer sur la Place du Champ de Mars ou sur la Place de la Lib√©ration.</p>
                <p> <span class="highlight">Concernant la r√©ception :</span> le Ch√¢teau se situe √† environ 45 minutes de Saint-L√©onard-de-Noblat et dispose de son propre parking. A l‚Äôissue des festivit√©s, des navettes seront √† votre disposition √† destination de Limoges.</p>

            </div>
            <div class="box">
                <h3>H√©bergements</h3>
                <p>Plusieurs h√¥tels pourront vous accueillir √† Limoges (situ√© √† environ 20 minutes du Ch√¢teau). Le propri√©taire du Ch√¢teau dispose √©galement d‚Äôh√¥tels de charme offrant plus de confort en centre-ville de Limoges¬†: la Maison Blanche et la Villa Beaupeyrat.</p>
            </div>
            <div class="box">
                <h3>Contacts</h3>
                <p>Pour toute question et information compl√©mentaire, vous pouvez nous contacter sur nos num√©ros :</p>
                   <br><ul>
                        <li>Giulia : 06 68 24 16 27</li>
                        <li>Louis : 06 99 75 89 97</li>
                    </ul>

            </div>
        </div>
    </section>

    <section id="liste" class="section ivoire">
        <h2>Votre pr√©sence est d√©j√† un cadeau üòâ ‚Ä¶ </h2>
        <p>Nous sommes tr√®s touch√©s que vous partagiez avec nous ce moment si important de notre vie. Votre pr√©sence √† nos c√¥t√©s, vos sourires et votre affection sont ce que nous attendons le plus. Pour ceux qui souhaitent, nous avons √©galement mis en place une liste de mariage. Il n‚Äôy a bien s√ªr aucune obligation !</p>
        <a href="#" class="cta-button cta-list">Voir la liste</a>
    </section>

    <!-- Formulaire -->

    <section id="reponse" class="section beige">
        <h2>Merci de nous confirmer votre pr√©sence</h2>

        <form id="rsvp-identification">
            <label for="prenom">Pr√©nom</label>
            <input type="text" id="prenom" name="prenom" required>

            <label for="nom">Nom</label>
            <input type="text" id="nom" name="nom" required>

            <button type="submit" id="submit-btn" class="cta-button">Continuer</button>
        </form>

        <div id="invitation-details" style="display: none;">
            <p id="invitation-type" class="invitation-message"></p>
            <form id="rsvp-complet" method="POST" action="https://script.google.com/macros/s/AKfycbzBpcTrY5gXFhh6FcPG5Ab_borOptWM3mJUv9m-uO1tNptZuQvjhyUbyENsb5ThU-3O/exec">
            <input type="hidden" name="prenom">
            <input type="hidden" name="nom">

            <label for="presence">Serez-vous pr√©sent ?</label>
            <select id="presence" name="presence" required>
                <option value="" disabled selected hidden>Choisissez une option</option>
                <option value="oui">Oui</option>
                <option value="non">Non</option>
            </select>

            <label for="enfants">Viendrez-vous avec des enfants, le cas √©ch√©ant de quel √¢ge ?</label>
            <input type="text" id="enfants" name="enfants">

            <label for="restrictions">Avez-vous des restrictions alimentaires ?</label>
            <input type="text" id="restrictions" name="restrictions">

            <button type="submit" class="cta-button">Envoyer ma r√©ponse</button>
            </form>
            <p id="confirmation-message" style="display: none; color: green; font-weight: bold; margin-top: 1em;"> Merci ! Votre r√©ponse a bien √©t√© enregistr√©e.</p>
        </div>
    </section>


    <script>
        const token = "FbbGshjyq8wpmvi2o87";
        const apiUrl = "https://script.google.com/macros/s/AKfycbzBpcTrY5gXFhh6FcPG5Ab_borOptWM3mJUv9m-uO1tNptZuQvjhyUbyENsb5ThU-3O/exec";

        document.getElementById("rsvp-identification").addEventListener("submit", function(e) {
    e.preventDefault();

    const prenom = document.getElementById("prenom").value.trim();
    const nom = document.getElementById("nom").value.trim();

    const submitBtn = document.getElementById("submit-btn");
    submitBtn.disabled = true;
    submitBtn.textContent = "Recherche en cours...";

    fetch(`${apiUrl}?prenom=${encodeURIComponent(prenom)}&nom=${encodeURIComponent(nom)}&token=${token}`)
    .then(res => res.json())
    .then(data => {
        if (data.invitation) {
            let messageInvitation = '';

            switch(data.invitation) {
                case 'Festivit√©s':
                    messageInvitation = '√Ä l‚Äôissue de la C√©r√©monie religieuse,<br> nous avons le plaisir de vous inviter au Vin d‚Äôhonneur (√† partir de 18h)<br> au Ch√¢teau de Laplaud, ainsi qu‚Äôaux festivit√©s qui suivront.';
                    break;
                case 'Vin d‚Äôhonneur':
                    messageInvitation = '√Ä l‚Äôissue de la C√©r√©monie religieuse,<br> nous avons le plaisir de vous inviter au Vin d‚Äôhonneur (√† partir de 18h)<br> au Ch√¢teau de Laplaud.';
                    break;
                case 'Brunch':
                    messageInvitation = '√Ä l‚Äôissue de la C√©r√©monie religieuse,<br> nous avons le plaisir de vous inviter au Vin d‚Äôhonneur,<br> aux festivit√©s qui suivront et au brunch du lendemain (√† partir de 11h)<br> au Ch√¢teau de Laplaud.';
                    break;
                case 'Secret party':
                    messageInvitation = '√Ä l‚Äôissue de la C√©r√©monie religieuse,<br> nous avons le plaisir de vous inviter au Vin d‚Äôhonneur,<br> aux festivit√©s qui suivront et au brunch du lendemain (√† partir de 11h)<br> au Ch√¢teau de Laplaud. <br><br> Attention - Secret party : <br>nous ne rendons le Ch√¢teau que lundi dans la matin√©e<br> et serions ravis de d√©briefer de ce moment et de trinquer avec vous<br> (avec un peu plus de s√©r√©nit√© et moins de monde) dimanche soir.';
                    break;
                default:
                    messageInvitation = `Nous avons le plaisir de vous inviter : ${data.invitation}`;
            }

            document.getElementById("invitation-type").innerHTML = messageInvitation;

            // Pr√©-remplit les champs cach√©s
            document.querySelector('#rsvp-complet input[name="prenom"]').value = prenom;
            document.querySelector('#rsvp-complet input[name="nom"]').value = nom;

            document.getElementById("rsvp-identification").style.display = "none";
            document.getElementById("invitation-details").style.display = "block";
        } else {
            alert("Aucune invitation trouv√©e. Merci de v√©rifier l‚Äôorthographe.");
        }

        // R√©active le bouton dans tous les cas
        submitBtn.disabled = false;
        submitBtn.textContent = "Continuer";
    })
    .catch(() => {
        alert("Erreur de connexion.");
        submitBtn.disabled = false;
        submitBtn.textContent = "Continuer";
    });

});

        // Formulaire de soumission finale
        document.getElementById("rsvp-complet").addEventListener("submit", function(e) {
    e.preventDefault();
    const form = e.target;
    const data = new FormData(form);

    const submitButton = form.querySelector("button[type='submit']");
    submitButton.disabled = true;
    submitButton.textContent = "Envoi en cours...";

    console.log("Envoi des donn√©es :", {
        prenom: data.get("prenom"),
        nom: data.get("nom"),
        presence: data.get("presence")
    });

    form.action = `${apiUrl}?token=${token}`;

    fetch(form.action, {
        method: "POST",
        body: data,
        headers: { "Accept": "application/json" }
    })
    .then(res => {
        if (res.ok) {
            form.reset();
            form.querySelector("#presence").value = "";
            document.getElementById("confirmation-message").style.display = "block";
        } else {
            alert("Erreur d‚Äôenvoi.");
        }
    })
    .catch(() => {
        alert("Erreur d‚Äôenvoi.");
    })
    .finally(() => {
        submitButton.disabled = false;
        submitButton.textContent = "Envoyer ma r√©ponse";
    });
});

    </script>

</body>
</html>
